<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>User Profile</title>
  <link rel="icon" href="/bradspelsmeny/img/favicon.ico" />
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../css/shared-ui.css">
  <style>
    body {
  margin:0;
  padding:20px;
  max-width:600px;
  margin-left:auto;
  margin-right:auto;
  font-family:'Segoe UFI',Tahoma,Geneva,Verdana,sans-serif;
  background-color:#fffdf7;
  color:#5a2a0c;
  user-select:none;
}
.profile-container {
  background:rgba(249,246,242,0.95);
  border-radius:10px;
  padding:20px;
  border:2px dashed #d9b370;
  box-shadow:2px 2px 6px rgba(90,42,12,0.15);
}
.section-title {
  font-family:'Press Start 2P',monospace;
  font-size:0.75rem;
  font-weight:bold;
  color:#5a2a0c;
  border-bottom:2px solid #d9b370;
  padding-bottom:4px;
  margin-top:20px;
  margin-bottom:12px;
  text-transform:uppercase;
}
.friends-grid,.parties-grid {
  display:flex;
  flex-wrap:wrap;
  gap:10px;
  justify-content:center;
  margin-bottom:1rem;
}

.badges-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(48px, 1fr));
  gap: 8px;
  justify-items: center;
  margin-bottom: 1.5rem;
}

.badges-grid img {
  width: 48px;
  height: 48px;
  object-fit: contain;
  image-rendering: pixelated;
  cursor: pointer;
  border-radius: 8px; 
  transition: transform 0.2s ease;
}

.badges-grid img:hover {
  transform: scale(1.1);
}



.party-avatar {
  width:48px;
  height:48px;
  border-radius:50%;
  border:2px dashed #d9b370;
  background-color:#f9f6f2;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:1.2rem;
  color:#5a2a0c;
  cursor:pointer;
  transition:transform 0.2s ease;
}
.party-avatar:hover {
  transform:scale(1.1);
}
.add-party-circle {
  width:48px;
  height:48px;
  border-radius:50%;
  margin-left:2px;
  border:2px dashed #d9b370;
  display:flex;
  align-items:center;
  justify-content:center;
  color:#d9b370;
  font-size:1.5rem;
  background-color:transparent;
  cursor:pointer;
  transition:background-color 0.2s ease,transform 0.2s ease;
}
h1 {
  font-family:'Press Start 2P',monospace;
  font-size:1.2rem;
  text-align:center;
  margin-bottom:1.5rem;
  color:#5a2a0c;
  text-shadow:1px 1px 0 #d9b370;
}
.avatar {
  display:block;
  margin:0 auto 20px auto;
  width:140px;
  height:140px;
  border-radius:50%;
  object-fit:cover;
  border:3px solid #c9a04e;
  box-shadow:2px 2px 5px rgba(90,42,12,0.25);
}
.full-name {
  font-family:'Press Start 2P',monospace;
  font-size:1.1rem;
  font-weight:bold;
  text-align:center;
  margin-bottom:6px;
  color:#6b3e0a;
}
.modal {
  position:fixed;
  z-index:1000;
  left:0;
  top:0;
  width:100%;
  height:100%;
  background-color:rgba(0,0,0,0.5);
  display:flex;
  align-items:center;
  justify-content:center;
}
.modal-content {
  background:#fffdf7;
  border:2px dashed #d9b370;
  border-radius:12px;
  padding:20px;
  width:80%;
  max-width:320px;
  text-align:center;
  color:#5a2a0c;
  position:relative;
}
.modal-content input {
  width:100%;
  padding:10px;
  font-size:1rem;
  margin-top:10px;
  border:1px solid #d9b370;
  border-radius:6px;
}
.close-btn {
  position:absolute;
  top:6px;
  right:12px;
  font-size:24px;
  cursor:pointer;
  color:#6b3e0a;
}
.friend-avatar {
  width:48px;
  height:48px;
  border-radius:50%;
  border:2px solid #d9b370;
  object-fit:cover;
  transition:transform 0.2s ease;
}
.friend-avatar:hover {
  transform:scale(1.1);
  cursor:pointer;
}
.add-friend-circle {
  width:48px;
  height:48px;
  border-radius:50%;
  border:2px dashed #d9b370;
  display:flex;
  align-items:center;
  justify-content:center;
  color:#d9b370;
  font-size:1.5rem;
  background-color:transparent;
  cursor:pointer;
  transition:background-color 0.2s ease,transform 0.2s ease;
}
.add-friend-circle:hover {
  background-color:#fff3d6;
  transform:scale(1.1);
}
.btn-accept {
  background-color:#85c17e;
  color:white;
}
.btn-decline {
  background-color:#e06d6d;
  color:white;
}
.btn-accept:hover {
  background-color:#6fae65;
}
.btn-decline:hover {
  background-color:#c65555;
}
.email {
  text-align:center;
  font-size:0.9rem;
  color:#6b3e0a;
  margin-bottom:15px;
  word-break:break-word;
}
.bio {
  font-size:0.9rem;
  line-height:1.3;
  white-space:pre-wrap;
  padding:0 10px;
  color:#5a2a0c;
  border-left:4px solid #d9b370;
  margin-bottom:20px;
}
.section-title {
  font-family:'Press Start 2P',monospace;
  font-size:0.75rem;
  font-weight:bold;
  color:#5a2a0c;
  border-bottom:2px solid #d9b370;
  padding-bottom:4px;
  margin-top:20px;
  margin-bottom:12px;
  text-transform:uppercase;
}
/* Borrow log table */
    table {
  width:100%;
  border-collapse:collapse;
  font-size:0.8rem;
  color:#5a2a0c;
}
th,td {
  padding:6px 8px;
  border-bottom:1px solid #d9b370;
  text-align:left;
}
th {
  background-color:#f9f6f2;
  color:#6b3e0a;
  font-weight:700;
  text-transform:uppercase;
  letter-spacing:0.05em;
}
tbody tr:hover {
  background-color:#fff3d6;
}
tbody tr:last-child td {
  border-bottom:none;
}
/* Placeholder boxes for badges and parties */
    .placeholder-box {
  background-color:#f9f6f2;
  border:2px dashed #d9b370;
  border-radius:8px;
  padding:1rem;
  text-align:center;
  color:#a07d3b;
  font-style:italic;
  user-select:text;
}
/* Edit Profile button */
    #editProfileBtn {
  display:none;
  /* Show only on own profile */
      margin-top:25px;
  background-color:#d9b370;
  color:#5a2a0c;
  font-family:'Press Start 2P',monospace;
  font-size:0.75rem;
  padding:12px 0;
  width:100%;
  border:none;
  border-radius:8px;
  cursor:pointer;
  box-shadow:2px 2px 0 #6b3e0a;
  text-align:center;
  text-decoration:none;
  user-select:none;
  transition:background-color 0.3s ease;
}
#editProfileBtn:hover {
  background-color:#c9a04e;
  box-shadow:2px 2px 0 #3f1f00;
  color:#3f1f00;
}
/* Game list styling */
    .game-list-container {
  margin-top:1.5rem;
}
.favorites-grid {
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(56px,1fr));
  gap:8px;
  justify-items:center;
  margin-bottom:1.5rem;
}
.wishlist-grid {
  display:flex;
  flex-direction:column;
  gap:8px;
  margin-bottom:1.5rem;
}
.game-entry {
  padding:10px;
 /* border:1px dashed #d9b370; */
  background-color:#f9f6f2;
  margin-bottom:10px;
  border-radius:8px;
  display:flex;
  align-items:center;
  gap:12px;
}
.notification-icon {
      position: fixed;
      bottom: 20px;
      right: 20px;
      z-index: 1000;
      cursor: pointer;
      transition: transform 0.2s;
    }

    .notification-icon:hover {
      transform: scale(1.1);
    }
.game-entry img {
  width:60px;
  height:60px;
  object-fit:cover;
  border-radius:8px;
  border:2px solid #c9a04e;
}
.game-entry-title {
  font-size:0.9rem;
  font-weight:bold;
  color:#5a2a0c;
}
.add-party-circle:hover {
  background-color:#fff3d6;
  transform:scale(1.1);
  margin-left:4px;
}

.game-thumbnail img {
  width: 60px;
  height: 60px;
  object-fit: cover;
  border-radius: 8px;
  border: 2px solid #c9a04e;
  background-color: #f9f6f2;
}

  </style>
</head>
  
  <body>
    <img id="avatar" class="avatar" src="/bradspelsmeny/img/avatar-placeholder.webp" alt="User avatar">
    <div class="profile-container">
      
      <div id="username" class="full-name">Loading...</div>
      <div id="bio" class="bio"></div>
      <div class="section-title">Badges</div>
      <div id="badgesGrid" class="badges-grid"></div>
      <button id="editProfileBtn" style="display:none">Edit Profile</button>
      <button id="addFriendBtn" style="display:none">Add Friend</button>

      <div class="section-title">Friends</div>
      <div id="friendsList" class="friends-grid"></div>

      <div class="section-title">Parties</div>
      <div id="partyList" class="parties-grid"></div>


      <div class="section-title">Favorite Games</div>
      <div id="favoritesGrid" class="favorites-grid"></div>

      <div class="section-title">Want to play</div>
      <div id="wishlistGrid" class="games-grid"></div>

      <div class="section-title">Game History</div>
      <table id="borrowLogTable">
        <thead>
          <tr>
            <th>Date</th>
            <th>Game</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>
    <section class="notifications" aria-label="Notifications">
			<img id="notificationIcon" 
				 src="../img/icons/icon-notif-off.webp" 
				 alt="Notifications"
				 title="Notifications" 
				 width="58" 
				 height="58"
				 class="notification-icon"
				 role="button"
				 tabindex="0"
				 aria-label="Open notifications" />
			<span id="notificationDot" class="notification-dot" aria-hidden="true"></span>

			<div id="notificationModal" class="modal" role="dialog" aria-label="Notifications" style="display: none;">
				<div class="modal-content">
					<button class="close-btn" id="closeNotificationBtn" aria-label="Close notifications">&times;</button>
					<h3>Notifications</h3>
					<div id="notificationList" class="notification-list">
						<div class="placeholder-box">Loading...</div>
					</div>
				</div>
			</div>
		</section>

    <nav id="pixelNav" role="navigation" aria-label="Huvudnavigation">
      <img src="../img/icons/icon-home.webp" alt="Hem" class="nav-icon" onclick="goTo('/')">
      <img src="../img/icons/icon-profile.webp" alt="Profil" class="nav-icon" onclick="goTo('/pages/profile.html')">
      <img id="logoutIcon" src="../img/icons/icon-logout.webp" alt="Logga ut" class="nav-icon" onclick="logout()">
      <button id="adminMenuToggle" class="nav-icon" aria-label="Admin-meny" aria-expanded="false">
          <img src="../img/icons/icon-admintools.webp" alt="Admin-verktyg" width="32" height="32" />
      </button>
  </nav>
  <ul id="adminMenuDropdown" class="admin-menu" role="menu" aria-label="Admin-meny">
      <li role="none">
          <a href="/bradspelsmeny/admin/admin.html" role="menuitem">
              <img src="../img/icons/icon-admin.webp" alt="Admin-panel" width="48" height="48" />
          </a>
      </li>
      <li role="none">
          <a href="/bradspelsmeny/admin/edit-games.html" role="menuitem">
              <img src="../img/icons/icon-editgames.webp" alt="Redigera spel" width="48" height="48" />
          </a>
      </li>
      <li role="none">
          <a href="/bradspelsmeny/admin/user-db.html" role="menuitem">
              <img src="../img/icons/icon-friends.webp" alt="Användardatabas" width="48" height="48" />
          </a>
      </li>
      <li role="none">
          <a href="/bradspelsmeny/admin/lending.html" role="menuitem">
              <img src="../img/icons/icon-lending.webp" alt="Utlåning" width="48" height="48" />
          </a>
      </li>
      <li role="none">
          <a href="#" onclick="logout()" role="menuitem">
              <img src="../img/icons/icon-logout.webp" alt="Logga ut" width="48" height="48" />
          </a>
      </li>
  </ul>

  <!-- Spacing for navigation -->
  <div class="nav-spacing"></div>
    <!-- Add Friend Modal -->
    <div id="addFriendModal" class="modal" style="display:none">
      <div class="modal-content">
        <span class="close-btn">&times;</span>
        <h2>Add Friend</h2>
        <input type="text" id="friendEmail" placeholder="Friend's email">
        <button onclick="sendFriendRequest()">Send Request</button>
      </div>
    </div>

    <!-- Create Party Modal -->
    <div id="createPartyModal" class="modal" style="display:none">
      <div class="modal-content">
        <span class="close-btn">&times;</span>
        <h2>Create Party</h2>
        <input type="text" id="partyName" placeholder="Party name">
        <input type="text" id="partyEmoji" placeholder="Party emoji (optional)">
        <button type="submit">Create</button>
      </div>
    </div>

    <!-- Badge Info Modal -->
    <div id="badgeInfoModal" class="modal" style="display:none">
      <div class="modal-content">
        <span class="close-btn">&times;</span>
        <h2 class="modal-title"></h2>
        <img class="modal-image" style="max-width:100px;margin:10px auto;">
        <p class="modal-description"></p>
      </div>
    </div>

    <!-- Game Modal -->
    <div id="favoriteGameModal" class="modal" style="display:none">
      <div class="modal-content">
        <span class="close-btn">&times;</span>
        <h2 class="modal-title"></h2>
        <img class="modal-image" style="max-width:200px;margin:10px auto;">
        <p class="modal-description"></p>
      </div>
    </div>

    <!-- Wishlist Game Modal -->
    <div id="wishlistGameModal" class="modal" style="display:none">
      <div class="modal-content">
        <span class="close-btn">&times;</span>
        <h2 class="modal-title"></h2>
        <img class="modal-image" style="max-width:200px;margin:10px auto;">
        <p class="modal-description"></p>
      </div>
    </div>

    <!-- Load modules -->
    <script type="module" src="../js/modules/api.js"></script>
    <script type="module" src="../js/shared/shared-ui.js"></script>
    <script type="module" src="../js/modules/user-profile.js"></script>
    <script type="module" src="../js/modules/friends.js"></script>
    <script type="module" src="../js/modules/borrow-log.js"></script>
    <script type="module" src="../js/modules/favorites.js"></script>
    <script type="module" src="../js/modules/badges.js"></script>
    <script type="module" src="../js/modules/parties.js"></script>
    <script type="module" src="../js/modules/image-modal.js"></script>
    <script type="module" src="profile.js"></script>
    
  </body>

</html>


